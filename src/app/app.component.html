<div class="card mb-3 {{formBgColor}}">
	<div class="card-body">
		<form class="" #filtersubmit="ngForm" (ngSubmit)="updateFilter(filtersubmit.value)">
			<div class="row">
				<div class="col-md-6 mb-3">
					<label for="Search" class="forms-label h5 open">Search</label>
					<input *ngIf="! submitButton" [(ngModel)]="searchValue" (keyup)="updateFilter(filtersubmit.value)"
						   class="form-control nobutton" type="text" id="Search"
						   name="Search"/>
					<input *ngIf="submitButton" [(ngModel)]="searchValue" class="form-control button" type="text" id="Search"
						   name="Search"/>
				</div>
				<div *ngFor="let filter of filterFields" class="col-md-6 mb-3">
					<label for="filter-{{filter}}" class="forms-label h5 open">Filter by {{filter}}</label>
					<select *ngIf="! submitButton" [(ngModel)]="filterModel[filter]" (change)="updateFilter(filtersubmit.value)"
							id="filter-{{filter}}" name="filter-{{filter}}" class="form-control">
						<option [selected]="filter" value="" selected>{{filter}}
						</option>
						<option class="dropdown-item" *ngFor="let vals of dataHouse.filters[filter]" value="{{vals}}">
							{{vals}}
						</option>
					</select>
					<select *ngIf="submitButton" [(ngModel)]="filterModel[filter]" name="filter-{{filter}}" id="filter-{{filter}}" class="form-control">
						<option [selected]="filter" value="" selected>{{filter}}
						</option>
						<option class="dropdown-item" *ngFor="let vals of dataHouse.filters[filter]" value="{{vals}}">
							{{vals}}
						</option>
					</select>
				</div>
			</div>
			<div class="row">
				<!-- Submit / Reset Buttons -->
				<div class="col-md-6 mt-md-4 order-2 order-md-1">
					<button type="reset" class="btn btn-sm {{resetButtonColor}} mr-3" (click)="clearFilter()">Reset</button>
					<button *ngIf="submitButton" type="submit" class="btn btn-sm {{submitButtonColor}}">Submit</button>
				</div>
				<div class="col-md-6 mb-3 order-1 order-md-2">
					<label for="Sort" class="forms-label h5 open">Sort</label>
					<select *ngIf="! submitButton" [(ngModel)]="sortValue" (change)="updateFilter(filtersubmit.value)" name="Sort" id="Sort" class="form-control">
						<option *ngFor="let sortOption of sortOptions" [ngValue]="sortOption.value">
							{{sortOption.label}}
						</option>
					</select>
					<select *ngIf="submitButton" [(ngModel)]="sortValue" name="Sort" id="Sort" class="form-control">
						<option *ngFor="let sortOption of sortOptions" [ngValue]="sortOption.value">
							{{sortOption.label}}
						</option>
					</select>
				</div>
			</div>


		</form>
	</div>
</div>

<div>
	<ng-container *ngIf="!imagePosition || 'left' === imagePosition || 'right' === imagePosition">
		<div class="row">
			<div class="{{colWidth}}" *ngFor="let item of currentPageData; let i = index; let odd = odd">
				<div class="card mb-3 {{bgColor}}">
					<div class="card-body">
						<div class="row">
							<ng-container *ngIf="'left' === imagePosition">
								<div *ngIf="item[imageField]" class="col-md-3">
									<img *ngIf="!makeImagesLinks" src="{{item[imageField]}}" alt="{{item.hasOwnProperty( imageField + '_alt' ) ? item[imageField + '_alt'] : item[titleField]}}" class="img-fluid"/>
									<a *ngIf="makeImagesLinks" href="{{item[urlField]}}">
										<img src="{{item[imageField]}}" alt="{{item.hasOwnProperty( imageField + '_alt' ) ? item[imageField + '_alt'] : item[titleField]}}" class="img-fluid"/>
									</a>
								</div>
							</ng-container>
							<div class="{{cardTextWidth}}">
								<div *ngIf="item[titleField]" class="card-title h4 text-left"><a href="{{item[urlField]}}"><span [innerHTML]="item[titleField]"></span></a></div>
								<p *ngIf="item[descriptionField]" [innerHTML]="item[descriptionField]"></p>
								<p *ngIf="item[dateField]">{{dateField}}: {{item[dateField] | date:dateFormat}} </p>
								<ng-container *ngIf="displayFilterVals">
									<p *ngFor="let filter of filterFields"> {{filter}}:
										<ng-container *ngFor="let filterVal of item[filter] | slice:0:10; let last = last">
											<a href="" (click)="doFilter(filter, filterVal)">{{formatFilterVal( filterVal )}}</a><ng-container *ngIf="!last">, </ng-container>
										</ng-container>
									</p>
								</ng-container>
								<p *ngIf="displayComments"><svg class="x24 inline-block ml-2 mr-2 fill-p" focusable="false" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><use href="#chat_02" xlink:href="#chat_02"></use></svg><a href="{{item[urlField]}}#{{getCommentAnchor()}}">Comments</a></p>
							</div><!-- col -->
							<ng-container *ngIf="'right' === imagePosition">
								<div *ngIf="item[imageField]" class="col-md-3">
									<img src="{{item[imageField]}}" alt="{{item[titleField]}}" class="img-fluid"/>
								</div>
							</ng-container>
						</div><!-- row -->
					</div><!-- card-body -->

				</div><!-- card -->
			</div><!-- column -->
		</div><!-- row -->
	</ng-container>
	<ng-container *ngIf="'top' === imagePosition">
		<div class="row">
			<div class="{{colWidth}}"  *ngFor="let item of currentPageData; let i = index; let odd = odd">
				<div class="card mb-3 {{bgColor}}">
					<div class="card-body">
						<div class="card">
							<img *ngIf="item[imageField] && !makeImagesLinks" src="{{item[imageField]}}" alt="{{item.hasOwnProperty( imageField + '_alt' ) ? item[imageField + '_alt'] : item[titleField]}}" class="card-img-top p-0"/>
							<a *ngIf="makeImagesLinks && item[imageField]" href="{{item[urlField]}}">
								<img src="{{item[imageField]}}" alt="{{item.hasOwnProperty( imageField + '_alt' ) ? item[imageField + '_alt'] : item[titleField]}}" class="card-img-top p-0"/>
							</a>
							<div class="card-body pr-0 pl-0">
								<div *ngIf="item[titleField]" class="card-title h4 text-left"><a href="{{item[urlField]}}"><span [innerHTML]="item[titleField]"></span></a></div>
								<p *ngIf="item[descriptionField]" [innerHTML]="item[descriptionField]"></p>
								<p *ngIf="item[dateField]">{{dateField}}: {{item[dateField] | date:dateFormat}} </p>
								<ng-container *ngIf="displayFilterVals">
									<p *ngFor="let filter of filterFields"> {{filter}}:
										<ng-container *ngFor="let filterVal of item[filter] | slice:0:10; let last = last">
											<a href="" (click)="doFilter(filter, filterVal)">{{formatFilterVal( filterVal )}}</a><ng-container *ngIf="!last">, </ng-container>
										</ng-container>
									</p>
								</ng-container>
								<p *ngIf="displayComments"><svg class="x24 inline-block ml-2 mr-2 fill-p" focusable="false" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><use href="#chat_02" xlink:href="#chat_02"></use></svg><a href="{{item[urlField]}}#{{getCommentAnchor()}}">Comments</a></p>
							</div><!-- card-body -->
						</div><!-- card -->
					</div><!-- card-body -->
				</div><!-- card -->
			</div><!-- column -->
		</div><!-- row -->
	</ng-container>
	<!--<pagination-controls (pageChange)="p = $event"></pagination-controls>-->
	<ngb-pagination
			*ngIf="filteredDataLength > itemsPerPage"
		class="d-flex justify-content-center"
		(pageChange)="changeCurrentPage($event)"
		[(collectionSize)]="filteredDataLength"
		[(page)]="currentPage"
		[maxSize]="3"
		[rotate]="true"
		[ellipses]="true"
		[(directionLinks)]="directionLinks"
		[(boundaryLinks)]="boundaryLinks"
		[(pageSize)]="itemsPerPage">
	</ngb-pagination>
	<svg style="display:none" focusable="false" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><symbol id="chat_02" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 40 40" xmlns:xlink="http://www.w3.org/1999/xlink">
		<title>
			chat_02
		</title>
		<path d="M31.3,24.29V8.68a2.8,2.8,0,0,0-2.8-2.8H4a2.8,2.8,0,0,0-2.8,2.8V24.29A2.8,2.8,0,0,0,4,27.09H8.71v6.42l7.13-6.42H28.51A2.79,2.79,0,0,0,31.3,24.29ZM36,12h-3.5V25.66a3.21,3.21,0,0,1-2.69,2.68l-13.68.07a2.55,2.55,0,0,0,2.8,2.48h5.39l7,6.38V30.89H36a2.54,2.54,0,0,0,2.8-2.48V14.74A2.73,2.73,0,0,0,36,12Z" class="fr-evenodd"/>
	</symbol>
	</svg>
</div>
